<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Modified: August 02 2024
Watched this video to take some notes on what REST is.
API: Application Programming Interface, is how to computers can communicate with each other.
Client sends a Request to the server, server sends a response back to the client.
REST, or Representational State Transfer, is the most popular way to communicate with these web servers.
REST is actually a set of rules and standards. Any API that follows the REST rules is known as a RESTful API." />
<meta name="keywords" content="homepage, blog, computerscience, api, project, python, tutorialnotes, internet, flask" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://localhost:1313/projects/designing-a-restful-api/" />


    <title>
        
            Designing a RESTful API :: Mr. Pointing  â€” Computer Science Teacher
        
    </title>





<link rel="stylesheet" href="/main.035c38bd5963f806b4d5c85fa524207296da59d813979f6be51d99d00155ebce.css" integrity="sha256-A1w4vVlj&#43;Aa01chfpSQgcpbaWdgTl59r5R2Z0AFV684=">




<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="Designing a RESTful API">
  <meta itemprop="description" content="Modified: August 02 2024
Watched this video to take some notes on what REST is.
API: Application Programming Interface, is how to computers can communicate with each other.
Client sends a Request to the server, server sends a response back to the client.
REST, or Representational State Transfer, is the most popular way to communicate with these web servers.
REST is actually a set of rules and standards. Any API that follows the REST rules is known as a RESTful API.">
  <meta itemprop="datePublished" content="2024-06-20T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-06-20T00:00:00+00:00">
  <meta itemprop="wordCount" content="1848">
  <meta itemprop="image" content="http://localhost:1313/">
  <meta itemprop="keywords" content="Computerscience,Api,Project,Python,Tutorialnotes,Internet,Flask">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/">
  <meta name="twitter:title" content="Designing a RESTful API">
  <meta name="twitter:description" content="Modified: August 02 2024
Watched this video to take some notes on what REST is.
API: Application Programming Interface, is how to computers can communicate with each other.
Client sends a Request to the server, server sends a response back to the client.
REST, or Representational State Transfer, is the most popular way to communicate with these web servers.
REST is actually a set of rules and standards. Any API that follows the REST rules is known as a RESTful API.">



    <meta property="og:url" content="http://localhost:1313/projects/designing-a-restful-api/">
  <meta property="og:site_name" content="Mr. Pointing">
  <meta property="og:title" content="Designing a RESTful API">
  <meta property="og:description" content="Modified: August 02 2024
Watched this video to take some notes on what REST is.
API: Application Programming Interface, is how to computers can communicate with each other.
Client sends a Request to the server, server sends a response back to the client.
REST, or Representational State Transfer, is the most popular way to communicate with these web servers.
REST is actually a set of rules and standards. Any API that follows the REST rules is known as a RESTful API.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2024-06-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-06-20T00:00:00+00:00">
    <meta property="article:tag" content="Computerscience">
    <meta property="article:tag" content="Api">
    <meta property="article:tag" content="Project">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Tutorialnotes">
    <meta property="article:tag" content="Internet">
    <meta property="og:image" content="http://localhost:1313/">






    <meta property="article:published_time" content="2024-06-20 00:00:00 &#43;0000 UTC" />









    
  




    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">

    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                mr. pointing</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/notes">Notes</a></li><li><a href="/now">Now</a></li><li><a href="/posts">Posts</a></li><li><a href="/projects">Projects</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="http://localhost:1313/projects/designing-a-restful-api/">Designing a RESTful API</a></h2>

            
            
            

            <div class="post-content">
                <p>Modified: August 02 2024</p>
<hr>
<p>Watched <a href="https://www.youtube.com/watch?v=-mN3VyJuCjM">this</a> video to take some notes on what REST is.</p>
<p>API: Application Programming Interface, is how to computers can communicate with each other.</p>
<p>Client sends a Request to the server, server sends a response back to the client.</p>
<p>REST, or Representational State Transfer, is the most popular way to communicate with these web servers.</p>
<p>REST is actually a set of rules and standards. Any API that follows the REST rules is known as a RESTful API.</p>
<p>Stripe and Google Maps are two examples.</p>
<p>RESTful API organizes resources into a set of unique URI&rsquo;s (uniform resource identifiers):</p>
<pre tabindex="0"><code>https://example.com/api/v3/products
https://example.com/api/v3/users
</code></pre><p>The URI&rsquo;s differentiate different types of resources on the sever.</p>
<p>{{ $image := .Resources.GetMatch &ldquo;Pasted image 20240620090314.png&rdquo; }}
{{ with $image }}
<!-- raw HTML omitted -->
{{ end }}</p>
<p>When requesting, the format has to be specific. Since the client is communicating with the server over HTTP, the request often looks something like this: <code>POST /products HTTP/1.1</code>. The URI is preceded by an HTTP verb, POST, that tells the server what we want to do with the URI resource.</p>
<p>POST is to create a new resource.
GET means we want to read data about an existing resource.
PUT is for when you want update an existing resource.
DELETE is for removing an existing resource.</p>
<p>In the body of any of the previous requests, there can exist an additional HTTP request body that contains a custom payload of data, usually in JSON. Server receives request, processes it, then formats the result into a response.</p>
<p>The first line of the response has a HTTP status code to let the client know what happened.</p>
<p>200 means the request was successful.
400 means something was wrong with the request.
500 means something was wrong with the server.</p>
<p>Idempotent refers to an action, that when performed multiple times on the same subject, it has no further effect on it&rsquo;s subject after the first time it&rsquo;s performed.</p>
<p>{{ $image := .Resources.GetMatch &ldquo;Pasted image 20240620091713.png&rdquo; }}
{{ with $image }}
<!-- raw HTML omitted -->
{{ end }}</p>
<p>A RESTful API should be stateless; the client and server should not store any information about one another, and every request and response (cycle) is independent from all others.</p>
<hr>
<p>Taking notes from <a href="https://blog.luisrei.com/articles/rest.html">this</a> article on more REST</p>
<p><strong>How to design a RESTful Web API</strong></p>
<p>Everything is a resource; every interaction is an interaction with a resource. We can simplify all REST calls as mapping and endpoint to a resource, which becomes our URL.</p>
<p>This article uses URL, while the previous uses URI. For simplicities sake, I&rsquo;ll use URL for the rest of the notes on this article.</p>
<p>An example of a resource: a user can be a resource, and would have the following URL:</p>
<pre tabindex="0"><code>https://api.github.com/users/rpointing
</code></pre><p>Resources have different representations. The example above might have some JSON representation:</p>
<pre tabindex="0"><code>{
	&#34;login&#34;: &#34;rpointing&#34;,
	&#34;created_at&#34;: &#34;1997-05-01T21:00:00&#34;,
	&#34;name&#34;: &#34;Richard Pointing&#34;,
	&#34;email&#34;: &#34;rpointing@gmail.com&#34;,
	&#34;id&#34;: 58632,
	&#34;blog&#34;: &#34;https://jobanyrosario.com&#34;
}
</code></pre><p>Resources are nouns, and actions are verbs. Actions are HTTP verbs, aka request methods.</p>
<ul>
<li>GET: Retrieves a representation of a resource without side-effects (no changes to the server)</li>
<li>HEAD: retrieves just the resource meta-information (headers) i.e. same as GET without the response body or side effects</li>
<li>OPTIONS: Returns the actions supported by the specified resource</li>
<li>POST: Creates a resource</li>
<li>PUT: (completely) replaces an existing resource</li>
<li>PATCH: Partial modification of a resource</li>
<li>DELETE: Deletes a resource</li>
</ul>
<p>We attach information after the URL:</p>
<pre tabindex="0"><code>POST https://api.github.com/gists/gists
{
	&#34;description&#34;: &#34;The description for this gist&#34;,
	&#34;public&#34;: true,
	&#34;files&#34;: {
		&#34;file1.txt&#34;: {
			&#34;content&#34;: &#34;String file contents&#34;
		}
	}
}
</code></pre><p>If its not a resource or an action, the rest goes in the header.</p>
<p><strong>Content Negotiation</strong> is how we chose between different representations of the same resource.</p>
<pre tabindex="0"><code>GET https://api.github.com/gists/1
Accept: application/json

# or

GET https://api.github.com/gists/1
Accept: application/xml
</code></pre><p>One will retrieve the JSON representation of the resource, the other will get the XML version. You can even specify compression or language.</p>
<p><strong>Caching</strong> is the process of storing responses from API requests. The two main response headers they go over here are <em>Expires</em> which specifies an absolute expiry time for cached representations, and <em>Cache-control</em> which specifies a relative expiry time using max-age directive.</p>
<p>Both work with <em>ETag</em>, which is an identifier, commonly stored as a hash, meant to change when the resource changes, invalidating cached versions of the object.</p>
<p><strong>Authorization</strong> is what keeps anyone from making POST requests to any server at any given time. Basic HTTP authentication should be used with HTTPs to ensure safety.</p>
<p><strong>Rate Limiting</strong> allows you to set the amount of calls a client can make to the server.</p>
<pre tabindex="0"><code>&gt;&gt;&gt; GET https://api.github.com/gists/1
200 OK
X-RateLimit-Limit: 5000
X-RateLimit-Remaining: 4966
</code></pre><p>The Limit is the total amount allowed (per hour), and the remaining is the amount left to make before the limit is reached.</p>
<p>6/25/2024</p>
<p><strong>HATEOAS, Options, and Error Handling</strong></p>
<p>&ldquo;A REST API must not define fixed resource names or hierarchies (a coupling of client and server). Servers must have the freedom to control their own namespace&hellip;A REST API should be entered with no prior knowledge beyond the initial URI&rdquo; - Roy Thomas</p>
<p>Basically in a REST based architecture, any URL besides the initial URL can be changed, even to other servers without worrying about the client.</p>
<p>HATEOAS stands for Hypermedia As The Engine Of Application State, and is the thinking of the API as a state machine where resources are thought of as states and the transitions between states are links between resources.</p>
<pre tabindex="0"><code>GET https://api.spire.io

# results in 

200 OK
{
	&#34;url&#34;: &#34;https://api.spire.io/&#34;,
	&#34;resources&#34;: {
		&#34;sessions&#34;: {
			&#34;url&#34;: &#34;https://api.spire.io/sessions&#34;
		},
		&#34;accounts&#34;: {
			&#34;url&#34;: &#34;https://api.spire.io/accounts&#34;
		},
		&#34;billing&#34;: {
			&#34;url&#34;: &#34;https://api.spire.io/billing&#34;
		}
	}
}
</code></pre><p>In the above example, the root resource, or what we call the <em>initial state</em> contains the transitions to the other resources (states) reachable from it: &ldquo;sessions&rdquo;, &ldquo;accounts&rdquo;, &ldquo;billing&rdquo;.</p>
<p>Like we saw in the list above, OPTION will return the actions that can be performed on any given resource.</p>
<pre tabindex="0"><code>OPTIONS https://api.spire.io/accounts

# results in

Status Code: 200
access-control-allow-methods: GET,POST
access-control-allow-origin: *
</code></pre><p>Error responses should consist of:</p>
<ul>
<li>The appropriate HTTP error status code with relevant headers</li>
<li>A human readable message in the appropriate format</li>
<li>A <em>Link</em> header to a meaningful state transition if appropriate</li>
</ul>
<pre tabindex="0"><code>GET https://api.twilio.com/2010-04-01/Accounts.json

# results in

401 Unauthorized
WWW-Authenticate: Basic realm=&#34;Twilio API&#34;
{
	&#34;status&#34;: 401,
	&#34;message&#34;: &#34;Authenticate&#34;,
	&#34;code&#34;: 20003,
	&#34;more_info&#34;: &#34;http:\/\/www.twilio.com\/docs\/errors\/20003&#34;
}
</code></pre><hr>
<p>Starting <a href="https://blog.luisrei.com/articles/flaskrest.html">this</a> project.</p>
<p>We&rsquo;re going to use Flask for this for a few reasons:</p>
<ul>
<li>Flask is written in Python</li>
<li>Simple to use</li>
<li>Flexible</li>
<li>Many different deployment options</li>
<li>RESTful request dispatching</li>
</ul>
<p><strong>Resources</strong></p>
<p>We can start the app by implementing a response for the root, an articles page, and accessing a specific article:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask <span style="color:#f92672">import</span> Flask, url_for
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> Flask(__name__)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_root</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Welcome&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/articles&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_articles</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;List of &#39;</span> <span style="color:#f92672">+</span> url_for(<span style="color:#e6db74">&#39;api_articles&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/articles/&lt;articleid&gt;&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_article</span>(articleid):
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;You are reading &#39;</span> <span style="color:#f92672">+</span> articleid
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>	app<span style="color:#f92672">.</span>run()
</span></span></code></pre></div><p>In order to actually run these events, you can run the code and use the following prompts to start getting responses:</p>
<pre tabindex="0"><code>&gt;&gt;&gt; GET /
Welcome

&gt;&gt;&gt; GET /articles
List of /articles

&gt;&gt;&gt; GET /articles/123
You are reading 123
</code></pre><p>Special note about using variables in the example above: if you want to specify exactly what data type the variable should be, use it like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/articles/&lt;int:articleid&gt;&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/articles/&lt;float:articleid&gt;&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/articles/&lt;path:articleid&gt;&#39;</span>)
</span></span></code></pre></div><p>6/27/2024</p>
<p><strong>Requests</strong></p>
<p>The following code works with GET requests as well, and is a bit more complex than the above examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask <span style="color:#f92672">import</span> request
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/hello&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_hello</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;name&#39;</span> <span style="color:#f92672">in</span> request<span style="color:#f92672">.</span>args:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Hello &#39;</span> <span style="color:#f92672">+</span> request<span style="color:#f92672">.</span>args[<span style="color:#e6db74">&#39;name&#39;</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Hello stranga!&#39;</span>
</span></span></code></pre></div><p>We can use the following calls on the above (going forward I&rsquo;ll use the convention of using RESTED Chrome application):</p>
<pre tabindex="0"><code>&gt;&gt;&gt; GET http://127.0.0.1:5000/hello
Hello stranga!

&gt;&gt;&gt; GET http://127.0.0.1:5000/hello?name=clifford%20the%20big%20red%20dog
Hello clifford the big red dog
</code></pre><p>We can specify the request methods that can be called on a resource by specifying the methods in the app route:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/echo&#39;</span>, methods <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#e6db74">&#39;POST&#39;</span>, <span style="color:#e6db74">&#39;PATCH&#39;</span>, <span style="color:#e6db74">&#39;PUT&#39;</span>, <span style="color:#e6db74">&#39;DELETE&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_echo</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;GET&#39;</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;ECHO: GET</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;ECHO: POST</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;PATCH&#39;</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;ECHO: PATCH</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;PUT&#39;</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;ECHO: PUT</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;DELETE&#39;</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;ECHO: DELETE&#34;</span>
</span></span></code></pre></div><p>6/29/2024</p>
<p>We can specify further what type of data can be requested and what to do when certain types are requested:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/messages&#39;</span>, methods <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;POST&#39;</span>])  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_message</span>():  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;Content-Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;text/plain&#39;</span>:  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Text Message: &#34;</span> <span style="color:#f92672">+</span> request<span style="color:#f92672">.</span>data  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;Content-Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;application/json&#39;</span>:  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;JSON Message: &#34;</span> <span style="color:#f92672">+</span> json<span style="color:#f92672">.</span>dumps(request<span style="color:#f92672">.</span>json)  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> request<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;Content-Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;application/octet-stream&#39;</span>:  
</span></span><span style="display:flex;"><span>       f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;./binary&#39;</span>, <span style="color:#e6db74">&#39;wb&#39;</span>)  
</span></span><span style="display:flex;"><span>       f<span style="color:#f92672">.</span>write(request<span style="color:#f92672">.</span>data)  
</span></span><span style="display:flex;"><span>       f<span style="color:#f92672">.</span>close()  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Binary message written!&#39;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;415 Unsupported Media Type! ;)&#34;</span>
</span></span></code></pre></div><p><strong>Responses</strong></p>
<p>Flask has  built in Response class to handle responses:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/hello&#39;</span>, methods <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;GET&#39;</span>])  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_hello</span>():  
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> {  
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#39;hello&#39;</span>: <span style="color:#e6db74">&#39;world&#39;</span>,  
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#39;number&#39;</span>: <span style="color:#ae81ff">3</span>  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    js <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(data)  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    resp <span style="color:#f92672">=</span> Response(js, status<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>, mimetype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;application/json&#39;</span>)  
</span></span><span style="display:flex;"><span>    resp<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;Link&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://jobanyrosario.com&#39;</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> resp
</span></span></code></pre></div><p>will return the following:</p>
<pre tabindex="0"><code># header
Server: Werkzeug/3.0.3 Python/3.9.13 Date: Sat, 29 Jun 2024 16:35:18 GMT Content-Type: application/json Content-Length: 31 Link: https://jobanyrosario.com Connection: close

# output
{ 
	&#34;hello&#34;: &#34;world&#34;,
	&#34;number&#34;: 3 
}
</code></pre><p><em>Mimetype</em> acts as the content&rsquo;s type without including additional information (like charset, encoding, etc.). Flask also has a built-in method that makes generating JSON responses easier. By including the header <code>jsonify</code>, you can replace the <code>Response</code> initialization with the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>resp <span style="color:#f92672">=</span> jsonify(data)
</span></span><span style="display:flex;"><span>resp<span style="color:#f92672">.</span>status_code <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
</span></span></code></pre></div><p>This will generate the same response as before.  I took out the second line (specifying the status code) and it still gave me a response code of 200, so that second line might be optional (making it even more useful).</p>
<p><strong>Status Codes &amp; Errors</strong></p>
<p>Even if there aren&rsquo;t many circumstances where handling a 200 status code is necessary, it can be for error handling. In the following example, we create a handler that can deal with any 404 error the API receives, as well as an example of how it can be used usefully:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@app.errorhandler</span>(<span style="color:#ae81ff">404</span>)  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">not_found</span>(error<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):  
</span></span><span style="display:flex;"><span>    message <span style="color:#f92672">=</span> {  
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#39;status&#39;</span>: <span style="color:#ae81ff">404</span>,  
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#39;message&#39;</span>: <span style="color:#e6db74">&#39;Not Found &#39;</span> <span style="color:#f92672">+</span> request<span style="color:#f92672">.</span>url  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    resp <span style="color:#f92672">=</span> jsonify(message)  
</span></span><span style="display:flex;"><span>    resp<span style="color:#f92672">.</span>status_code <span style="color:#f92672">=</span> <span style="color:#ae81ff">404</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> resp  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/users/&lt;userid&gt;&#39;</span>, methods <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;GET&#39;</span>])  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_users</span>(userid):  
</span></span><span style="display:flex;"><span>    users <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;1&#39;</span>: <span style="color:#e6db74">&#39;Alex&#39;</span>, <span style="color:#e6db74">&#39;2&#39;</span>: <span style="color:#e6db74">&#39;Jaime&#39;</span>, <span style="color:#e6db74">&#39;3&#39;</span>: <span style="color:#e6db74">&#39;Akuma&#39;</span>}  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> userid <span style="color:#f92672">in</span> users:  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> jsonify({userid:users[userid]})  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> not_found()
</span></span></code></pre></div><p>You could also overwrite error messages using the <code>@error_handler</code> decorator above, or in the following way:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>app<span style="color:#f92672">.</span>error_handler_spec[<span style="color:#66d9ef">None</span>][<span style="color:#ae81ff">404</span>] <span style="color:#f92672">=</span> not_found
</span></span></code></pre></div><p><strong>Authorization</strong></p>
<p>In the below code, we begin handling HTTP Basic Authentication:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> wraps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check_auth</span>(username, password):  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> username <span style="color:#f92672">&lt;</span>mark<span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#39;admin&#39;</span> <span style="color:#f92672">and</span> password <span style="color:#f92672">&lt;/</span>mark<span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#39;secret&#39;</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">authenticate</span>():  
</span></span><span style="display:flex;"><span>    message <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;message&#39;</span>: <span style="color:#e6db74">&#39;Authenticate.&#39;</span>}  
</span></span><span style="display:flex;"><span>    resp <span style="color:#f92672">=</span> jsonify(message)  
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>    resp<span style="color:#f92672">.</span>status_code <span style="color:#f92672">=</span> <span style="color:#ae81ff">401</span>  
</span></span><span style="display:flex;"><span>    resp<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;WWW-Authenticate&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Basic realm=&#34;Example&#34;&#39;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> resp  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">requires_auth</span>(f):  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@wraps</span>(f)  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">decorated</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):  
</span></span><span style="display:flex;"><span>       auth <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>authorization  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> auth:  
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">return</span> authenticate()  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">elif</span> <span style="color:#f92672">not</span> check_auth(auth<span style="color:#f92672">.</span>username, auth<span style="color:#f92672">.</span>password):  
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">return</span> authenticate()  
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">return</span> f(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)  
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> decorated
</span></span></code></pre></div><p>In the above example, to reiterate, <code>*args</code> takes in any <em>positional</em> arguments passed and keeps them as a tuple, and <code>**kwargs</code> allows the function to take in any number of <em>keyword</em> arguments, stored as a dictionary. These are helpful to keep the function flexible, and able to take in any function with any amount of parameters.</p>
<p><strong>Simple Debug &amp; Logging</strong></p>
<p>In order to debug while developing, you can easily set <code>debug=True</code> when calling the app to start running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>app<span style="color:#f92672">.</span>run(debug<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p>Flask uses python logging off the rip:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> logging
</span></span><span style="display:flex;"><span>file_handler <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>FileHandler(<span style="color:#e6db74">&#39;app.log&#39;</span>)
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>addHandler(file_handler)
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>setLevel(logging<span style="color:#f92672">.</span>INFO)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.route</span>(<span style="color:#e6db74">&#39;/hello&#39;</span>, methods<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;GET&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">api_hello</span>():
</span></span><span style="display:flex;"><span>	app<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#39;informing&#39;</span>)
</span></span><span style="display:flex;"><span>	app<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>warning(<span style="color:#e6db74">&#39;warning&#39;</span>)
</span></span><span style="display:flex;"><span>	app<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#39;screaming bloody murder!&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Check your logs!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>
</span></span></code></pre></div>
            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="http://localhost:1313/tags/computerscience/">computerscience</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/api/">api</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/project/">project</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/python/">python</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/tutorialnotes/">tutorialnotes</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/internet/">internet</a></span>
        <span class="tag"><a href="http://localhost:1313/tags/flask/">flask</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content" style=>
            
            <a href="https://mrpointing.com" style="text-decoration: none;">Richard Pointing</a>
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            
            
        </div>
    </div>
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js" integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc&#43;cxaJzDdCYbAW0X1G&#43;DgZYvtKFXe6MBex8jUJ2JT25mQx&#43;YjACIng=="></script>




    </body>
</html>
