<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content=" The External World Lua is not the language for powerful performance with the exterior world. Even the text admits that most use of Input and Output are done through the host application or external libraries. Lua can handle basic file manipulation, which we&rsquo;ll review now.
The Simple I/O Model Lua assumes the use of two streams, the current input stream and the current output stream. Using C terminology, the current input is default stdin while output is stdout. We can route either using io.input and io.output, respectively.
" />
<meta name="keywords" content="homepage, blog, computerscience, textbook, lua, syntax" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://mrpointing.com/notes/computer-science/textbooks/programming-in-lua/the-basics/programming-in-lua---chapter-7/" />


    <title>
        
            Programming in Lua - Chapter 7 :: Mr. Pointing  — Computer Science Teacher
        
    </title>





<link rel="stylesheet" href="/main.78623716c19b6e3da412acb903db12995d096b78cb9fcffec9375c7c45dba15d.css" integrity="sha256-eGI3FsGbbj2kEqy5A9sSmV0Ja3jLn8/&#43;yTdcfEXboV0=">




<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="Programming in Lua - Chapter 7">
  <meta itemprop="description" content="The External World Lua is not the language for powerful performance with the exterior world. Even the text admits that most use of Input and Output are done through the host application or external libraries. Lua can handle basic file manipulation, which we’ll review now.
The Simple I/O Model Lua assumes the use of two streams, the current input stream and the current output stream. Using C terminology, the current input is default stdin while output is stdout. We can route either using io.input and io.output, respectively.">
  <meta itemprop="datePublished" content="2025-03-23T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-03-23T00:00:00+00:00">
  <meta itemprop="wordCount" content="759">
  <meta itemprop="image" content="https://mrpointing.com/">
  <meta itemprop="keywords" content="Computerscience,Textbook,Lua,Syntax">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://mrpointing.com/">
  <meta name="twitter:title" content="Programming in Lua - Chapter 7">
  <meta name="twitter:description" content="The External World Lua is not the language for powerful performance with the exterior world. Even the text admits that most use of Input and Output are done through the host application or external libraries. Lua can handle basic file manipulation, which we’ll review now.
The Simple I/O Model Lua assumes the use of two streams, the current input stream and the current output stream. Using C terminology, the current input is default stdin while output is stdout. We can route either using io.input and io.output, respectively.">



    <meta property="og:url" content="https://mrpointing.com/notes/computer-science/textbooks/programming-in-lua/the-basics/programming-in-lua---chapter-7/">
  <meta property="og:site_name" content="Mr. Pointing">
  <meta property="og:title" content="Programming in Lua - Chapter 7">
  <meta property="og:description" content="The External World Lua is not the language for powerful performance with the exterior world. Even the text admits that most use of Input and Output are done through the host application or external libraries. Lua can handle basic file manipulation, which we’ll review now.
The Simple I/O Model Lua assumes the use of two streams, the current input stream and the current output stream. Using C terminology, the current input is default stdin while output is stdout. We can route either using io.input and io.output, respectively.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2025-03-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-03-23T00:00:00+00:00">
    <meta property="article:tag" content="Computerscience">
    <meta property="article:tag" content="Textbook">
    <meta property="article:tag" content="Lua">
    <meta property="article:tag" content="Syntax">
    <meta property="og:image" content="https://mrpointing.com/">






    <meta property="article:published_time" content="2025-03-23 00:00:00 &#43;0000 UTC" />









    



    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">

    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                mr. pointing</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/notes">Notes</a></li><li><a href="/now">Now</a></li><li><a href="/posts">Posts</a></li><li><a href="/projects">Projects</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://mrpointing.com/notes/computer-science/textbooks/programming-in-lua/the-basics/programming-in-lua---chapter-7/">Programming in Lua - Chapter 7</a></h2>

            
            
            

            <div class="post-content">
                <hr>
<h1 id="the-external-world">The External World</h1>
<p>Lua is not the language for powerful performance with the exterior world. Even the text admits that most use of Input and Output are done through the host application or external libraries. Lua can handle basic file manipulation, which we&rsquo;ll review now.</p>
<h2 id="the-simple-io-model">The Simple I/O Model</h2>
<p>Lua assumes the use of two streams, the <em>current input stream</em> and the <em>current output stream</em>. Using C terminology, the current input is default <code>stdin</code> while output is <code>stdout</code>. We can route either using <code>io.input</code> and <code>io.output</code>, respectively.</p>
<p><code>io.write</code> will take in any amount of strings and write them to the currently set output stream. A nice tip the text uses is avoiding the concatenation operator to create dynamic strings;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>io.write(a<span style="color:#f92672">..</span>b<span style="color:#f92672">..</span>c) <span style="color:#75715e">--&gt; avoid</span>
</span></span><span style="display:flex;"><span>io.write(a, b, c) <span style="color:#75715e">--&gt; nice!</span>
</span></span></code></pre></div><p>Now with <code>io.write</code> introduced, <code>print</code> should only be used for quick printing/debugging;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> io.write(<span style="color:#e6db74">&#34;sin(3) = &#34;</span>, math.sin(<span style="color:#ae81ff">3</span>), <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e">--&gt; sin(3) = 0.14112000805987</span>
</span></span></code></pre></div><p><code>io.read</code> takes a few different arguments, controlling how the content is read;</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Value</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>&quot;a&quot;</code></td>
          <td>reads the whole file</td>
      </tr>
      <tr>
          <td><code>&quot;l&quot;</code></td>
          <td>reads the next line (dropping the newline)</td>
      </tr>
      <tr>
          <td><code>&quot;L&quot;</code></td>
          <td>reads the next line (keeping the newline)</td>
      </tr>
      <tr>
          <td><code>&quot;n&quot;</code></td>
          <td>reads a number</td>
      </tr>
      <tr>
          <td><code>num</code></td>
          <td>reads <code>num</code> characters as a string</td>
      </tr>
      <tr>
          <td>Working with reading and writing to files is quite strange. After reading all contents to a file, if you try to assign that same file to another variable using the same connection as before, you get nothing in return, since you already read everything in. Honestly it gets easier in the next part, let&rsquo;s just jot down some of the important functions they gave us;</td>
          <td></td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">local</span> lines <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> line <span style="color:#66d9ef">in</span> io.lines() <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>  lines[<span style="color:#f92672">#</span>lines <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> line
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>table.sort(lines)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _, l <span style="color:#66d9ef">in</span> ipairs(lines) <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>  io.write(l, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><h2 id="the-complete-model">The Complete Model</h2>
<p>For more advanced stuff, we&rsquo;ll have to rely on C. Opening a file is a great place to start; we can use <code>io.open</code> and pass in a file path and a <em>mode</em>. Mode determines what the opening can do; <code>w</code> for write, <code>r</code> for read, and <code>a</code> for appending. You can also use <code>b</code> for binary files.</p>
<p>This is where we get better control over our file opening. We can use assert to check for errors, open a file, and have a variable display it&rsquo;s contents;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">local</span> f <span style="color:#f92672">=</span> assert(io.open(<span style="color:#e6db74">&#39;a.txt&#39;</span>, <span style="color:#e6db74">&#39;r&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">local</span> t <span style="color:#f92672">=</span> f:read(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span>f:close()
</span></span><span style="display:flex;"><span>print(t)
</span></span></code></pre></div><p>You can also define which output stream your content flows too; <code>io.stdin</code>, <code>io.stdout</code>, and <code>io.stderr</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>io.stderr:write(message)
</span></span></code></pre></div><p><code>io.lines</code> will also work as <code>io.read</code> does, and changes the read to another stream.</p>
<h2 id="other-operations-on-files">Other Operations on Files</h2>
<p>Some cool functions:</p>
<ul>
<li><code>io.tmpfile</code>: returns a stream over a temporary file, that opens it in a read and write mode that automatically deletes the file upon completion of the program</li>
<li><code>flush</code>: an execution statement for all pending writes to a given file
<ul>
<li><code>io.flush()</code> for current output stream</li>
<li><code>f:flush()</code> for stream <code>f</code></li>
</ul>
</li>
<li><code>seek</code>: gets and sets the current position of a given string
<ul>
<li>Syntax: <code>seek(whence, offset)</code></li>
<li>When used on a file, just pass in one of these offsets
<ul>
<li><code>cur</code>: default, current stream position</li>
<li><code>set</code>: sets the position to the beginning of the file</li>
<li><code>end</code>: sets the position to the end of the file</li>
</ul>
</li>
</ul>
</li>
<li><code>os.rename</code>: changes the name of a file</li>
<li><code>os.remove</code>: removes a file</li>
</ul>
<h2 id="other-system-calls">Other System Calls</h2>
<p>Some cool system calls;</p>
<ul>
<li><code>os.exit</code>: exits a program</li>
<li><code>os.getenv</code>: gets value of an environment variable
<ul>
<li><code>print(os.getenv(&quot;HOME&quot;))</code></li>
</ul>
</li>
<li><code>os.execute</code>: runs a system command
<ul>
<li><code>function createDir (dirname); os.execute(&quot;mkdir &quot; .. dirname); end</code></li>
</ul>
</li>
<li><code>io.popen</code>: runs a system command, but creates and connect a new input/output stream</li>
</ul>
<h3 id="exercises">Exercises</h3>
<ol>
<li>Write a program that reads a text file and rewrites it with its lines sorted in alphabetical order. When called with no arguments, it should read from standard input and write to standard output. When called with one file name argument, it should read from that file and write to standard output. When called with two file name arguments, it should read from the first file and write to the second.</li>
</ol>
<p>Just getting the first part was hard enough on my own, mostly because I wasn&rsquo;t understanding how to properly write to a text file, but after looking through my notes and the text I realized I just need to call it with the right permissions after reading, rather than passing in both at the same time;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sort_text</span>()
</span></span><span style="display:flex;"><span>  f <span style="color:#f92672">=</span> assert(io.open(<span style="color:#e6db74">&#39;a.txt&#39;</span>, <span style="color:#e6db74">&#39;r&#39;</span>))
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">local</span> newt <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, math.huge <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">local</span> line <span style="color:#f92672">=</span> f:read(<span style="color:#e6db74">&#34;l&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> line <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">break</span> <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>	newt[<span style="color:#f92672">#</span>newt <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> line
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  table.sort(newt)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  f:close()
</span></span><span style="display:flex;"><span>  f <span style="color:#f92672">=</span> assert(io.open(<span style="color:#e6db74">&#39;a.txt&#39;</span>, <span style="color:#e6db74">&#39;w&#39;</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> _, l <span style="color:#66d9ef">in</span> ipairs(newt) <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    f:write(l, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  f:close()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sort_text()
</span></span></code></pre></div><hr>
<p>Next:
<a href="https://mrpointing.com/notes/computer-science/textbooks/programming-in-lua/the-basics/programming-in-lua---chapter-8/">Chapter 8</a></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://mrpointing.com/tags/computerscience/">computerscience</a></span>
        <span class="tag"><a href="https://mrpointing.com/tags/textbook/">textbook</a></span>
        <span class="tag"><a href="https://mrpointing.com/tags/lua/">lua</a></span>
        <span class="tag"><a href="https://mrpointing.com/tags/syntax/">syntax</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content" style=>
            
            <a href="https://mrpointing.com" style="text-decoration: none;">Richard Pointing</a>
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            
            
        </div>
    </div>
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js" integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc&#43;cxaJzDdCYbAW0X1G&#43;DgZYvtKFXe6MBex8jUJ2JT25mQx&#43;YjACIng=="></script>




    </body>
</html>
